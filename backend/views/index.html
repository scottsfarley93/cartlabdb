<html>
<head>
  <title>UWCL Login</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
<style>
#main{
  text-align: center
}
.form-control, label{
  display: block;
  text-align: center;
}
</style>
</head>
  <body>
    <div class='container' id='main'>
      <h2 class='page-header'>UWCL Resource Server</h2>
      <div class='col-xs-4 col-xs-offset-4' id='main'>
        {{#if invalid}}
          <div class='alert alert-danger' role='alert'>Invalid Username or Password.  Please try again.</div>
        {{/if}}
        {{#if notApproved}}
          <div class='alert alert-warning' role='alert'>Your used account has not been approved by an existing administrator yet.  You will not be able to log on to the system until your account has been reviewed and approved.</div>
        {{/if}}

        <form action='/login' method='post' id='login'>
          <fieldset class="form-group">
          <label>Username: </label>
          <input type='text' id='username'  class='form-control' name='email'/>
          <label>Password: </label>
          <input type='password' id='password' class='form-control' name='p' /><br / />
          <input type='submit' name='submit' id='submit' class='btn btn-success' />
          <br />
          <br />
          <a href="/register">Click here to register</a>
      </fieldset>
      </form>
      </div>
    </div>
    <script   src="https://code.jquery.com/jquery-2.2.4.js"   integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="   crossorigin="anonymous"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script>
    //alert the user with query string
    $(document).ready(function(){
      invalidCredentials = getQueryVariable('invalid')
      if (invalidCredentials){
        html ="<div class='alert alert-warning' role='alert'>Invalid Username or Password.  Please try again.</div>"
        $("#main").prepend(html)
      }
    })


    //for parsing the query string
    function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split('=');
            if (decodeURIComponent(pair[0]) == variable) {
                return decodeURIComponent(pair[1]);
            }
        }
    }
    </script>
  </body>
</html>
